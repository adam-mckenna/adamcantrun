---
import { Article, contentfulClient } from "./../../contentful";
import Layout from "../../layouts/Article.astro";
import BaseHead from "../../components/BaseHead.astro";

export async function getStaticPaths() {
  const { items } = await contentfulClient.getEntries<Article>({
    content_type: "article",
  });
  return items.map(({ fields }) => ({
    params: { slug: fields.slug },
    props: {
      ...fields,
    },
  }));
}

const { title, metaDescription } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={metaDescription} />
    <title>{title}</title>
  </head>
  <body>
    <Layout {...Astro.props} />
  </body>
</html>
